<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Political Bias Test - Mindset</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .news-source {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            background: #f8f9fa;
        }
        .liberal { border-left: 4px solid #2196F3; }
        .conservative { border-left: 4px solid #F44336; }
        .centrist { border-left: 4px solid #FF9800; }
        .unknown { border-left: 4px solid #757575; }
        .bias-label {
            font-weight: bold;
            padding: 4px 8px;
            border-radius: 3px;
            color: white;
        }
        .liberal-label { background: #2196F3; }
        .conservative-label { background: #F44336; }
        .centrist-label { background: #FF9800; }
        .unknown-label { background: #757575; }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            font-weight: bold;
        }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üèõÔ∏è Political Bias Detection Test</h1>
        
        <div class="test-section">
            <h3>Test News Sources</h3>
            <p>Click on any news source to test the political bias detection:</p>
            
            <div class="news-source liberal">
                <div>
                    <strong>üîµ Liberal Sources:</strong>
                    <a href="https://www.nytimes.com" target="_blank">The New York Times</a> |
                    <a href="https://www.cnn.com" target="_blank">CNN</a> |
                    <a href="https://www.npr.org" target="_blank">NPR</a> |
                    <a href="https://www.washingtonpost.com" target="_blank">Washington Post</a>
                </div>
                <span class="bias-label liberal-label">Liberal</span>
            </div>
            
            <div class="news-source conservative">
                <div>
                    <strong>üî¥ Conservative Sources:</strong>
                    <a href="https://www.foxnews.com" target="_blank">Fox News</a> |
                    <a href="https://www.newsmax.com" target="_blank">Newsmax</a> |
                    <a href="https://www.breitbart.com" target="_blank">Breitbart</a> |
                    <a href="https://www.washingtontimes.com" target="_blank">Washington Times</a>
                </div>
                <span class="bias-label conservative-label">Conservative</span>
            </div>
            
            <div class="news-source centrist">
                <div>
                    <strong>üü° Centrist Sources:</strong>
                    <a href="https://www.reuters.com" target="_blank">Reuters</a> |
                    <a href="https://www.bbc.com/news" target="_blank">BBC News</a> |
                    <a href="https://www.ap.org" target="_blank">Associated Press</a> |
                    <a href="https://www.usatoday.com" target="_blank">USA Today</a>
                </div>
                <span class="bias-label centrist-label">Centrist</span>
            </div>
            
            <div class="news-source unknown">
                <div>
                    <strong>‚ö™ Unknown/Other:</strong>
                    <a href="https://www.reddit.com" target="_blank">Reddit</a> |
                    <a href="https://www.youtube.com" target="_blank">YouTube</a> |
                    <a href="https://www.facebook.com" target="_blank">Facebook</a> |
                    <a href="https://www.twitter.com" target="_blank">Twitter</a>
                </div>
                <span class="bias-label unknown-label">Unknown</span>
            </div>
        </div>

        <div class="test-section">
            <h3>Current Page Analysis</h3>
            <button onclick="testCurrentPage()" style="padding: 10px 20px; background: #4CAF50; color: white; border: none; border-radius: 5px; cursor: pointer;">
                Analyze Current Page
            </button>
            <div id="currentPageResult"></div>
        </div>

        <div class="test-section">
            <h3>Manual Domain Test</h3>
            <input type="text" id="domainInput" placeholder="Enter domain (e.g., cnn.com)" style="padding: 8px; margin-right: 10px; width: 200px;">
            <button onclick="testDomain()" style="padding: 8px 16px; background: #2196F3; color: white; border: none; border-radius: 5px; cursor: pointer;">
                Test Domain
            </button>
            <div id="domainResult"></div>
        </div>

        <div class="test-section">
            <h3>Expected Results</h3>
            <p>When you visit these sites, the status bar should show:</p>
            <ul>
                <li><strong>CNN, NYT, NPR:</strong> üîµ Liberal</li>
                <li><strong>Fox News, Newsmax, Breitbart:</strong> üî¥ Conservative</li>
                <li><strong>Reuters, BBC, AP:</strong> üü° Centrist</li>
                <li><strong>Social media, entertainment:</strong> ‚ö™ Unknown</li>
            </ul>
        </div>
    </div>

    <script>
        async function testCurrentPage() {
            try {
                const response = await chrome.runtime.sendMessage({
                    action: 'analyzePageForTab',
                    pageInfo: {
                        domain: window.location.hostname,
                        path: window.location.pathname,
                        title: document.title,
                        url: window.location.href
                    }
                });
                
                if (response && response.pageData) {
                    const data = response.pageData;
                    const resultDiv = document.getElementById('currentPageResult');
                    resultDiv.innerHTML = `
                        <div class="status success">
                            <strong>Analysis Results:</strong><br>
                            Domain: ${data.domain}<br>
                            Category: ${data.category}<br>
                            Credibility: ${data.credibility.toFixed(1)}/10<br>
                            Political Bias: ${data.politicalBias}<br>
                            Tone: ${data.tone}
                        </div>
                    `;
                } else {
                    showError('Failed to analyze current page');
                }
            } catch (error) {
                showError(`Error: ${error.message}`);
            }
        }

        async function testDomain() {
            const domain = document.getElementById('domainInput').value.trim();
            if (!domain) {
                showError('Please enter a domain');
                return;
            }

            try {
                const response = await chrome.runtime.sendMessage({
                    action: 'analyzePageForTab',
                    pageInfo: {
                        domain: domain,
                        path: '/',
                        title: 'Test Page',
                        url: `https://${domain}`
                    }
                });
                
                if (response && response.pageData) {
                    const data = response.pageData;
                    const resultDiv = document.getElementById('domainResult');
                    resultDiv.innerHTML = `
                        <div class="status success">
                            <strong>Domain Analysis:</strong><br>
                            Domain: ${data.domain}<br>
                            Category: ${data.category}<br>
                            Credibility: ${data.credibility.toFixed(1)}/10<br>
                            Political Bias: ${data.politicalBias}<br>
                            Tone: ${data.tone}
                        </div>
                    `;
                } else {
                    showError('Failed to analyze domain');
                }
            } catch (error) {
                showError(`Error: ${error.message}`);
            }
        }

        function showError(message) {
            const resultDiv = document.getElementById('currentPageResult');
            resultDiv.innerHTML = `<div class="status error">${message}</div>`;
        }

        // Auto-test on page load
        window.addEventListener('load', () => {
            setTimeout(() => {
                testCurrentPage();
            }, 1000);
        });
    </script>
</body>
</html> 